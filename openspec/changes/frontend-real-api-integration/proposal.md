# 提案：前端真实API数据集成

## 概述
将前端所有模拟数据替换为真实后端API调用，实现完整的前后端数据流通。

## 背景
当前前端使用Pinia stores中的硬编码模拟数据，后端API已完全就绪并通过测试。需要建立真正的API连接以展示真实数据。

## 目标
1. 创建统一的API客户端服务层
2. 替换所有模拟数据为API调用
3. 实现加载状态和错误处理
4. 添加数据缓存策略
5. 实现自动数据刷新

## 范围

### 需要替换的模拟数据
1. **仪表板统计数据** (stats store)
   - 今日/本周/本月提交统计
   - 代码行数统计
   - 连续编码天数
   - 工作时长
   - 仓库数量

2. **里程碑成就** (stats store)
   - 成就列表
   - 进度数据
   - 达成状态

3. **趋势数据** (stats store)
   - 最近7天提交趋势
   - 代码变更趋势

4. **热力图数据** (stats store)
   - 90天活跃度数据

5. **用户信息** (user store)
   - GitHub用户名
   - 头像URL
   - 基本信息

## 技术方案

### API客户端架构
```typescript
frontend/src/services/
├── api.ts              // 基础API配置
├── dashboard.ts        // 仪表板API
├── scheduler.ts        // 定时任务API
└── types.ts            // API类型定义
```

### 数据流
```
组件 → Store Action → API Service → 后端API
                ↓
            状态更新
                ↓
            组件重新渲染
```

### 错误处理策略
- 网络错误：显示错误提示，保留旧数据
- API错误：显示错误消息，提供重试按钮
- 认证错误：跳转到登录页（如果有）
- 超时处理：15秒超时，自动重试

### 缓存策略
- 仪表板数据：5分钟缓存
- 热力图数据：10分钟缓存
- 用户信息：本地存储，24小时过期

## 交付物
1. API服务层实现
2. 更新所有Pinia stores
3. 加载状态UI组件
4. 错误提示组件
5. API集成测试
6. 使用文档

## 依赖
- ✅ 后端API完全就绪
- ✅ FastAPI服务运行正常
- ⏳ 前端基础架构（已存在）

## 风险
1. CORS配置问题
2. API响应时间影响用户体验
3. 数据格式不匹配需要适配

## 验收标准
1. 所有页面显示真实数据
2. 无模拟数据残留
3. 加载状态正常显示
4. 错误处理完善
5. 页面刷新后数据正确

## 优先级
高 - 核心功能，必须尽快完成

## 估计工时
- API客户端: 2-3小时
- Stores更新: 2-3小时
- UI集成: 1-2小时
- 测试调试: 1-2小时
- 总计: 6-10小时