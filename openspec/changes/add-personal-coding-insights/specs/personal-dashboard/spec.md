## ADDED Requirements

### Requirement: 个人编码仪表板总览
系统 SHALL 提供一个综合性的个人编码仪表板，展示关键指标和洞察。

#### Scenario: 加载个人仪表板首页
- **WHEN** 用户访问个人仪表板
- **THEN** 系统 SHALL 在2秒内展示以下关键指标卡片：
  - 今日提交数、本周提交数、本月提交数
  - 今日代码行数（增加/删除）、本周代码量、本月代码量
  - 当前连续编码天数（Streak）
  - 最活跃的编程语言
  - 本周工作时长估算
- **AND** 系统 SHALL 展示编码活跃度热力图（类似GitHub但更详细）
- **AND** 系统 SHALL 展示最近7天的提交趋势迷你图

#### Scenario: 显示编码里程碑成就
- **WHEN** 用户达到重要里程碑
- **THEN** 系统 SHALL 在仪表板顶部显示成就徽章
- **AND** 支持的里程碑包括：
  - 连续编码天数（7天、30天、100天、365天）
  - 累计提交数（100、500、1000、5000）
  - 单日最高代码量（1000行、5000行、10000行）
  - 精通语言数（3种、5种、10种）
- **AND** 系统 SHALL 显示下一个里程碑的进度条

### Requirement: 多时间维度视图切换
系统 SHALL 支持日、周、月、季度、年和自定义时间范围的数据视图切换。

#### Scenario: 切换到日视图
- **WHEN** 用户点击"日视图"标签
- **THEN** 系统 SHALL 展示24小时时间轴的提交分布
- **AND** 系统 SHALL 显示每小时的提交数、代码量、活跃仓库
- **AND** 系统 SHALL 用柱状图展示每小时的编码强度
- **AND** 系统 SHALL 标注最高效的工作时段（深度工作时间）

#### Scenario: 切换到周视图
- **WHEN** 用户点击"周视图"标签
- **THEN** 系统 SHALL 展示本周7天的对比数据
- **AND** 系统 SHALL 显示每天的提交数、代码量、工作时长
- **AND** 系统 SHALL 用堆叠柱状图展示每天不同类型提交的占比
- **AND** 系统 SHALL 对比上周同期数据，显示增长/下降百分比
- **AND** 系统 SHALL 高亮显示本周最高产的一天

#### Scenario: 切换到月视图
- **WHEN** 用户点击"月视图"标签
- **THEN** 系统 SHALL 展示本月日历热力图
- **AND** 每个日期格子用颜色深浅表示当天的编码活跃度
- **AND** 系统 SHALL 显示月度统计摘要：
  - 总提交数、总代码量、平均每日提交数
  - 最活跃的一周、最高产的一天
  - 主要使用的编程语言和占比
- **AND** 系统 SHALL 展示月度提交类型分布饼图
- **AND** 系统 SHALL 对比上月数据显示趋势箭头

#### Scenario: 切换到年视图
- **WHEN** 用户点击"年视图"标签
- **THEN** 系统 SHALL 展示全年12个月的趋势对比
- **AND** 系统 SHALL 用折线图展示每月提交数的变化趋势
- **AND** 系统 SHALL 用堆叠面积图展示不同编程语言的使用占比变化
- **AND** 系统 SHALL 显示年度统计亮点：
  - 年度总提交数、总代码行数
  - 最活跃的月份、最高产的一天
  - 年度主要成就和突破
- **AND** 系统 SHALL 生成年度编码回顾报告（类似Spotify Wrapped）

#### Scenario: 自定义时间范围查询
- **WHEN** 用户选择自定义日期范围
- **THEN** 系统 SHALL 提供日期范围选择器
- **AND** 系统 SHALL 支持快捷选项：最近7天、最近30天、最近90天、最近一年
- **AND** 系统 SHALL 根据选择的时间跨度自动调整数据粒度
- **AND** 时间跨度<14天时，按天展示
- **AND** 时间跨度14-90天时，按周展示
- **AND** 时间跨度>90天时，按月展示

### Requirement: 编码时间和生产力分析
系统 SHALL 分析和展示编码时间分配和生产力模式。

#### Scenario: 显示工作时间分布
- **WHEN** 用户查看时间分析
- **THEN** 系统 SHALL 根据提交时间戳估算工作时段
- **AND** 系统 SHALL 展示一周工作时间热力图（7天×24小时）
- **AND** 系统 SHALL 识别并标注：
  - 最高效时段（提交最集中的2-3小时）
  - 深夜编码时段（23:00-06:00）
  - 周末工作时间
- **AND** 系统 SHALL 计算平均工作开始时间和结束时间

#### Scenario: 分析专注时段
- **WHEN** 用户查看专注度分析
- **THEN** 系统 SHALL 识别连续提交的时间块（间隔<2小时）
- **AND** 系统 SHALL 统计深度工作时段（连续编码>2小时）
- **AND** 系统 SHALL 展示每周深度工作时长趋势
- **AND** 系统 SHALL 提供建议最佳专注时段（基于历史数据）

#### Scenario: 工作与休息平衡分析
- **WHEN** 用户查看工作平衡报告
- **THEN** 系统 SHALL 统计工作日vs周末的编码时间比例
- **AND** 系统 SHALL 检测连续工作天数并提醒适当休息
- **AND** 系统 SHALL 计算平均每日工作时长
- **AND** 如果检测到过度工作模式（连续14天无休息），系统 SHALL 显示健康提醒

### Requirement: 编程语言和技术栈分析
系统 SHALL 追踪和分析使用的编程语言和技术栈的变化。

#### Scenario: 语言使用分布统计
- **WHEN** 用户查看语言分析
- **THEN** 系统 SHALL 根据修改的文件扩展名识别编程语言
- **AND** 系统 SHALL 展示饼图显示各语言的使用占比（按提交数或代码行数）
- **AND** 系统 SHALL 列出语言排行榜，显示每种语言的：
  - 提交次数、代码行数、文件数
  - 本月使用趋势（增加/减少）
  - 首次使用日期、最近使用日期
- **AND** 系统 SHALL 标注主力语言（使用占比>30%）

#### Scenario: 技术栈成长追踪
- **WHEN** 用户查看技能成长图
- **THEN** 系统 SHALL 展示时间轴显示新学习的语言/技术
- **AND** 系统 SHALL 用堆叠面积图展示各语言使用占比的历史变化
- **AND** 系统 SHALL 识别技术栈扩展事件（开始使用新语言）
- **AND** 系统 SHALL 显示每种语言的熟练度等级：
  - 初学者（<10次提交）
  - 入门（10-50次）
  - 熟练（50-200次）
  - 精通（>200次）

#### Scenario: 框架和库使用分析
- **WHEN** 用户查看框架分析
- **THEN** 系统 SHALL 通过扫描package.json、requirements.txt等识别使用的框架
- **AND** 系统 SHALL 展示技术栈云图（词云）
- **AND** 系统 SHALL 追踪框架版本更新记录
- **AND** 系统 SHALL 显示最常用的前10个框架/库

### Requirement: 代码仓库聚合分析
系统 SHALL 支持跨多个个人仓库的聚合分析。

#### Scenario: 查看所有仓库统一视图
- **WHEN** 用户选择"所有仓库"选项
- **THEN** 系统 SHALL 聚合所有个人仓库的提交数据
- **AND** 系统 SHALL 显示总体统计：总提交数、总仓库数、总代码量
- **AND** 系统 SHALL 提供仓库活跃度排行榜
- **AND** 系统 SHALL 支持按仓库筛选和对比

#### Scenario: 仓库分类管理
- **WHEN** 用户为仓库添加标签
- **THEN** 系统 SHALL 支持自定义标签（如"工作项目"、"个人学习"、"开源贡献"）
- **AND** 系统 SHALL 按标签分组统计提交数据
- **AND** 系统 SHALL 展示不同类别项目的时间分配饼图
- **AND** 系统 SHALL 支持按标签筛选视图

#### Scenario: 仓库时间线对比
- **WHEN** 用户选择对比多个仓库
- **THEN** 系统 SHALL 在同一时间轴上展示多个仓库的提交分布
- **AND** 系统 SHALL 用不同颜色区分不同仓库
- **AND** 系统 SHALL 支持最多同时对比5个仓库
- **AND** 系统 SHALL 显示每个仓库在不同时期的活跃度变化

### Requirement: 智能洞察和建议
系统 SHALL 基于历史数据提供智能洞察和个性化建议。

#### Scenario: 生成每周洞察报告
- **WHEN** 每周一上午系统自动生成周报
- **THEN** 系统 SHALL 分析上周数据并提供洞察：
  - "上周你的提交量增加了25%"
  - "你在周三晚上最高效"
  - "Python使用占比首次超过JavaScript"
  - "连续编码7天，创造新记录！"
- **AND** 系统 SHALL 提供个性化建议：
  - "建议在9-11点安排深度工作"
  - "周末休息不足，注意平衡工作与休息"
  - "你已经3天没提交代码了，保持习惯很重要"

#### Scenario: 检测异常模式
- **WHEN** 系统检测到编码模式异常
- **THEN** 系统 SHALL 发送通知：
  - 提交量突然下降（低于平均值50%）
  - 连续多天深夜编码（可能过度疲劳）
  - 单日删除大量代码（可能是重构或问题）
  - 新语言首次出现（学习新技能）

#### Scenario: 提供对比洞察
- **WHEN** 用户查看对比分析
- **THEN** 系统 SHALL 提供时间对比：
  - "本月比上月提交数增加30%"
  - "今年Q1是最活跃的季度"
  - "相比去年同期，代码量提升了2倍"
- **AND** 系统 SHALL 提供排名对比（如果有多用户）：
  - "你的连续编码天数在所有用户中排名前10%"

### Requirement: 编码目标设定和追踪
系统 SHALL 支持设定个人编码目标并追踪进度。

#### Scenario: 设定每日提交目标
- **WHEN** 用户设定每日提交目标（如每天至少1次提交）
- **THEN** 系统 SHALL 在仪表板显示当日目标完成进度
- **AND** 系统 SHALL 显示本月目标达成率
- **AND** 系统 SHALL 在完成目标时显示庆祝动画
- **AND** 系统 SHALL 记录连续达成目标的天数

#### Scenario: 设定技能学习目标
- **WHEN** 用户设定学习新语言目标（如"学习Rust并完成10次提交"）
- **THEN** 系统 SHALL 追踪该语言的提交进度
- **AND** 系统 SHALL 显示进度条和完成百分比
- **AND** 系统 SHALL 在达成目标时发送通知和奖励徽章

#### Scenario: 设定代码量目标
- **WHEN** 用户设定月度代码量目标（如"本月写10000行代码"）
- **THEN** 系统 SHALL 每日更新进度
- **AND** 系统 SHALL 预测是否能按时完成目标
- **AND** 系统 SHALL 提供每日建议代码量（基于剩余天数）

### Requirement: 年度回顾报告生成
系统 SHALL 在年底自动生成个性化的年度编码回顾报告。

#### Scenario: 生成年度编码回顾
- **WHEN** 进入12月份
- **THEN** 系统 SHALL 自动分析全年数据并生成精美报告，包含：
  - 年度总提交数、总代码行数、活跃天数
  - 最喜欢的编程语言和占比变化
  - 最活跃的月份和项目
  - 编码时间分布热力图
  - 技能成长时间线
  - 年度最大成就和里程碑
  - 有趣的统计数据（如最长连续编码天数、最晚的提交时间等）
- **AND** 系统 SHALL 支持分享到社交媒体（生成精美海报图）
- **AND** 系统 SHALL 提供PDF下载功能

#### Scenario: 年度数据可视化
- **WHEN** 用户查看年度回顾
- **THEN** 系统 SHALL 用动画展示数据变化
- **AND** 系统 SHALL 提供交互式时间轴浏览全年提交历史
- **AND** 系统 SHALL 展示"年度词云"（最常提交的关键词）
- **AND** 系统 SHALL 显示"编码旅程地图"（项目演进可视化）

### Requirement: 数据导出和分享
系统 SHALL 支持将个人数据导出并生成可分享的报告。

#### Scenario: 导出个人数据包
- **WHEN** 用户点击"导出所有数据"
- **THEN** 系统 SHALL 生成包含以下内容的ZIP文件：
  - commits.csv（所有提交记录）
  - stats.json（统计数据）
  - charts/（所有图表的PNG图片）
  - report.pdf（综合报告）
- **AND** 系统 SHALL 在5秒内完成打包
- **AND** 系统 SHALL 保留用户隐私，不包含敏感代码内容

#### Scenario: 生成可分享的成就卡片
- **WHEN** 用户点击"分享"按钮
- **THEN** 系统 SHALL 生成精美的成就卡片图片
- **AND** 卡片 SHALL 包含关键统计数据和个性化设计
- **AND** 系统 SHALL 提供多种主题样式选择
- **AND** 系统 SHALL 支持一键分享到Twitter、LinkedIn等平台

#### Scenario: 生成月度/季度报告
- **WHEN** 用户请求生成阶段性报告
- **THEN** 系统 SHALL 生成包含图表和洞察的PDF报告
- **AND** 报告 SHALL 包含执行摘要、详细数据、趋势分析
- **AND** 报告 SHALL 使用专业的排版和配色
- **AND** 系统 SHALL 支持自定义报告封面和Logo